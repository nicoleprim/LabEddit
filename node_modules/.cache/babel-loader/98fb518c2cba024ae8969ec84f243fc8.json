{"ast":null,"code":"import _slicedToArray from\"/home/nicole/alves-Nicole-Prim/modulo3/projeto-labeddit/projeto-labbedit/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{BASE_URL}from'../../Constants/urls';import{useProtectedPage}from'../../Hooks/useProtectedPage';import{useRequestData}from'../../Hooks/useRequestData';import Card from'../../Components/CardPost/Card';import{useForm}from'../../Hooks/useForm';import{createPost}from'../../Services/Posts';import{useState}from'react';import LoadingLogin from'../../Assets/loadinglogin.gif';import Loading from'../../Components/Loading/Loading';import Line from'../../Assets/Line.svg';import{ContainerForm,Inputs,InputUm,InputDois,ButtonForm,DivLine}from'./Styled';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var PostListPage=function PostListPage(){useProtectedPage();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),refresh=_useState2[0],setRefresh=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),like=_useState4[0],setLike=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),dislike=_useState6[0],setDislike=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setIsLoading=_useState8[1];var posts=useRequestData([],\"\".concat(BASE_URL,\"/posts?size=500\"),refresh);var _useForm=useForm({title:\"\",body:\"\"}),form=_useForm.form,onChange=_useForm.onChange,cleanFields=_useForm.cleanFields;var onSubmitForm=function onSubmitForm(event){event.preventDefault();createPost(form,cleanFields,setRefresh,refresh,setIsLoading);};var voteLike=function voteLike(id){if(like===true){voteRemove(setLike,like,id);setLike(!like);}else{var body={direction:1};axios.post(\"\".concat(BASE_URL,\"/posts/\").concat(id,\"/votes\"),body,{headers:{Authorization:localStorage.getItem(\"token\")}}).then(function(res){setLike(!like);setRefresh(!refresh);}).catch(function(err){console.log(err.response);});}};var voteDislike=function voteDislike(id){if(dislike===true){voteRemove(setDislike,dislike,id);setDislike(!dislike);}else{var body={direction:-1};axios.put(\"\".concat(BASE_URL,\"/posts/\").concat(id,\"/votes\"),body,{headers:{Authorization:localStorage.getItem(\"token\")}}).then(function(res){setDislike(!dislike);setRefresh(!refresh);}).catch(function(err){alert(err.response);});}};var voteRemove=function voteRemove(setVote,voteName,id){axios.delete(\"\".concat(BASE_URL,\"/posts/\").concat(id,\"/votes\"),{headers:{Authorization:localStorage.getItem(\"token\")}}).then(function(res){setVote(!voteName);setRefresh(!refresh);}).catch(function(err){alert(err.response.data);});};return/*#__PURE__*/_jsx(\"div\",{children:posts.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(ContainerForm,{onSubmit:onSubmitForm,children:[/*#__PURE__*/_jsxs(Inputs,{children:[/*#__PURE__*/_jsx(InputUm,{name:\"title\",type:\"text\",onChange:onChange,value:form.title,placeholder:\"T\\xEDtulo do post\",required:true}),/*#__PURE__*/_jsx(InputDois,{name:\"body\",type:\"text\",onChange:onChange,value:form.body,placeholder:\"Escreva seu post...\",required:true})]}),/*#__PURE__*/_jsx(ButtonForm,{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isLoading?/*#__PURE__*/_jsx(\"img\",{width:'30px',src:LoadingLogin,alt:\"gif carregando\"}):/*#__PURE__*/_jsx(_Fragment,{children:\"Postar\"})})})]}),/*#__PURE__*/_jsx(DivLine,{children:/*#__PURE__*/_jsx(\"img\",{src:Line,alt:\"linha\"})}),/*#__PURE__*/_jsx(Card,{posts:posts,voteLike:voteLike,voteDislike:voteDislike})]}):/*#__PURE__*/_jsx(Loading,{})});};export default PostListPage;","map":{"version":3,"names":["React","BASE_URL","useProtectedPage","useRequestData","Card","useForm","createPost","useState","LoadingLogin","Loading","Line","ContainerForm","Inputs","InputUm","InputDois","ButtonForm","DivLine","axios","PostListPage","refresh","setRefresh","like","setLike","dislike","setDislike","isLoading","setIsLoading","posts","title","body","form","onChange","cleanFields","onSubmitForm","event","preventDefault","voteLike","id","voteRemove","direction","post","headers","Authorization","localStorage","getItem","then","res","catch","err","console","log","response","voteDislike","put","alert","setVote","voteName","delete","data","length"],"sources":["/home/nicole/alves-Nicole-Prim/modulo3/projeto-labeddit/projeto-labbedit/src/Pages/PostListPage/PostListPage.js"],"sourcesContent":["import React from 'react'\nimport { BASE_URL } from '../../Constants/urls'\nimport { useProtectedPage } from '../../Hooks/useProtectedPage'\nimport { useRequestData } from '../../Hooks/useRequestData'\nimport Card from '../../Components/CardPost/Card'\nimport { useForm } from '../../Hooks/useForm'\nimport { createPost } from '../../Services/Posts'\nimport { useState } from 'react'\nimport LoadingLogin from '../../Assets/loadinglogin.gif'\nimport Loading from '../../Components/Loading/Loading'\nimport Line from '../../Assets/Line.svg'\nimport { ContainerForm, Inputs, InputUm, InputDois, ButtonForm, DivLine } from './Styled'\nimport axios from 'axios'\n\nconst PostListPage = () => {\n  useProtectedPage()\n  const [refresh, setRefresh] = useState(false)\n  const [like, setLike] = useState(false)\n  const [dislike, setDislike] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n  const posts = useRequestData([], `${BASE_URL}/posts?size=500`, refresh)\n  const { form, onChange, cleanFields } = useForm({ title: \"\", body: \"\" })\n\n  const onSubmitForm = (event) => {\n    event.preventDefault()\n    createPost(form, cleanFields, setRefresh, refresh, setIsLoading)\n  }\n\n  const voteLike = (id) => {\n    if (like === true) {\n      voteRemove(setLike, like, id)\n      setLike(!like)\n    } else {\n      const body = { direction: 1 }\n      axios.post(`${BASE_URL}/posts/${id}/votes`, body, {\n        headers: {\n          Authorization: localStorage.getItem(\"token\")\n        }\n      }).then((res) => {\n        setLike(!like)\n        setRefresh(!refresh)\n      }).catch((err) => {\n        console.log(err.response)\n      })\n    }\n  }\n\n  const voteDislike = (id) => {\n    if (dislike === true) {\n      voteRemove(setDislike, dislike, id)\n      setDislike(!dislike)\n    } else {\n      const body = { direction: -1 }\n      axios.put(`${BASE_URL}/posts/${id}/votes`, body, {\n        headers: {\n          Authorization: localStorage.getItem(\"token\")\n        }\n      })\n        .then((res) => {\n          setDislike(!dislike)\n          setRefresh(!refresh)\n        })\n        .catch((err) => {\n          alert(err.response)\n        })\n    }\n  }\n\n  const voteRemove = (setVote, voteName, id) => {\n    axios.delete(`${BASE_URL}/posts/${id}/votes`, {\n      headers: {\n        Authorization: localStorage.getItem(\"token\")\n      }\n    })\n      .then((res) => {\n        setVote(!voteName)\n        setRefresh(!refresh)\n      })\n      .catch((err) => {\n        alert(err.response.data)\n      })\n  }\n\n  return (\n    <div>\n      {posts.length > 0 ?\n        <>\n          <ContainerForm onSubmit={onSubmitForm}>\n            <Inputs>\n              <InputUm\n                name=\"title\"\n                type=\"text\"\n                onChange={onChange}\n                value={form.title}\n                placeholder=\"TÃ­tulo do post\"\n                required\n              />\n              <InputDois\n                name=\"body\"\n                type=\"text\"\n                onChange={onChange}\n                value={form.body}\n                placeholder=\"Escreva seu post...\"\n                required\n              />\n            </Inputs>\n            <ButtonForm>\n              <button type=\"submit\">\n                {isLoading ? <img width={'30px'} src={LoadingLogin} alt=\"gif carregando\" /> : <>Postar</>}\n              </button>\n            </ButtonForm>\n          </ContainerForm>\n          <DivLine>\n            <img src={Line} alt=\"linha\" />\n          </DivLine>\n          <Card posts={posts} voteLike={voteLike} voteDislike={voteDislike} />\n        </>\n        : <Loading />\n      }\n    </div>\n  )\n}\n\nexport default PostListPage"],"mappings":"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"},"metadata":{},"sourceType":"module"}